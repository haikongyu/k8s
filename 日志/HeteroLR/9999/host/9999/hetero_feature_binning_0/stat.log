[INFO] [2020-11-20 02:34:39,241] [1392:140407779477312] - control_client.py[line:42]: request update job 202011200231350021282 task 202011200231350021282_hetero_feature_binning_0 0 on host 9999
[DEBUG] [2020-11-20 02:34:50,146] [1392:140407779477312] - _federation.py[line:35]: [federation.eggroll]init federation: rp_session_id=202011200231350021282_hetero_feature_binning_0_0_host_9999, rs_session_id=202011200231350021282_hetero_feature_binning_0_0, party=Party(role=host, party_id=9999), proxy_endpoint=rollsite:9370
[DEBUG] [2020-11-20 02:34:50,150] [1392:140407779477312] - _federation.py[line:45]: [federation.eggroll]init federation context done
[INFO] [2020-11-20 02:34:50,154] [1392:140407779477312] - tracker_client.py[line:150]: Request read job 202011200231350021282 task None None on host 9999 data train info
[INFO] [2020-11-20 02:34:50,271] [1392:140407779477312] - task_executor.py[line:260]: load computing table use 8
[DEBUG] [2020-11-20 02:34:52,640] [1392:140407779477312] - component_properties.py[line:73]: {'FeatureBinningParam': {'method': 'quantile', 'compress_thres': 10000, 'head_size': 10000, 'error': 0.001, 'adjustment_factor': 0.5, 'bin_num': 10, 'bin_indexes': -1, 'bin_names': None, 'category_indexes': None, 'category_names': None, 'local_only': False, 'transform_param': {'transform_cols': -1, 'transform_names': None, 'transform_type': 'bin_num'}, 'optimal_binning_param': {'init_bucket_method': 'quantile', 'metric_method': 'iv', 'max_bin': None, 'mixture': True, 'max_bin_pct': 1.0, 'min_bin_pct': 0.05, 'init_bin_nums': 1000, 'adjustment_factor': None}, 'need_run': True, 'skip_static': False}, 'dsl_version': '2', 'initiator': {'role': 'guest', 'party_id': 10000}, 'role': {'guest': [10000], 'host': [9999], 'arbiter': [9999]}, 'job_parameters': {'job_type': 'train', 'work_mode': 1, 'backend': 0, 'computing_engine': 'EGGROLL', 'federation_engine': 'EGGROLL', 'storage_engine': 'EGGROLL', 'engines_address': {'computing': {'cores_per_node': 20, 'nodes': 1}, 'federation': {'host': 'rollsite', 'port': 9370}, 'storage': {'cores_per_node': 20, 'nodes': 1}}, 'federated_mode': 'MULTIPLE', 'task_parallelism': 2, 'computing_partitions': 8, 'federated_status_collect_type': 'PUSH', 'model_id': 'arbiter-9999#guest-10000#host-9999#model', 'model_version': '202011200231350021282', 'eggroll_run': {'eggroll.session.processors.per.node': 2}, 'spark_run': {'num-executors': 1, 'executor-cores': 2}, 'rabbitmq_run': {}, 'adaptation_parameters': {'task_nodes': 1, 'task_cores_per_node': 2, 'task_memory_per_node': 0}}, 'component_parameters': {'common': {'intersect_0': {'intersect_method': 'raw', 'sync_intersect_ids': True, 'only_output_key': False}, 'hetero_lr_0': {'penalty': 'L2', 'optimizer': 'rmsprop', 'alpha': 0.01, 'max_iter': 3, 'batch_size': 320, 'learning_rate': 0.15, 'init_param': {'init_method': 'random_uniform'}}}, 'role': {'guest': {'0': {'reader_0': {'table': {'name': 'breast_hetero_guest', 'namespace': 'experiment'}}, 'dataio_0': {'with_label': True, 'label_name': 'y', 'label_type': 'int', 'output_format': 'dense'}}}, 'host': {'0': {'reader_0': {'table': {'name': 'breast_hetero_host', 'namespace': 'experiment'}}, 'dataio_0': {'with_label': False, 'output_format': 'dense'}}}}}, 'config': '/data/projects/fate/python/fate_flow/examples/test_hetero_lr_job_conf.json', 'dsl': 'examples/test_hetero_lr_job_dsl.json', 'function': 'submit_job', 'local': {'role': 'host', 'party_id': 9999}, 'CodePath': 'federatedml/feature/hetero_feature_binning/hetero_binning_host.py/HeteroFeatureBinningHost', 'module': 'HeteroFeatureBinning', 'output_data_name': ['train']}
[DEBUG] [2020-11-20 02:34:52,643] [1392:140407779477312] - component_properties.py[line:80]: need_run: True, need_cv: False
[DEBUG] [2020-11-20 02:34:52,644] [1392:140407779477312] - base_feature_binning.py[line:77]: in _init_model, role: host, local_partyid: <federatedml.util.component_properties.ComponentProperties object at 0x7fb337d5fef0>
[DEBUG] [2020-11-20 02:34:52,645] [1392:140407779477312] - component_properties.py[line:102]: parse_dsl_args data_sets: {'intersect_0': {'data': [<fate_arch.computing.eggroll._table.Table object at 0x7fb3263f47f0>]}}
[DEBUG] [2020-11-20 02:34:52,646] [1392:140407779477312] - component_properties.py[line:112]: [Data Parser], has_train_data: False
[DEBUG] [2020-11-20 02:34:52,647] [1392:140407779477312] - component_properties.py[line:112]: [Data Parser], has_eval_data: False
[DEBUG] [2020-11-20 02:34:52,648] [1392:140407779477312] - component_properties.py[line:112]: [Data Parser], has_validate_data: False
[DEBUG] [2020-11-20 02:34:52,648] [1392:140407779477312] - component_properties.py[line:112]: [Data Parser], has_test_data: False
[DEBUG] [2020-11-20 02:34:52,649] [1392:140407779477312] - component_properties.py[line:118]: [Data Parser], has_normal_data: True
[DEBUG] [2020-11-20 02:34:52,650] [1392:140407779477312] - component_properties.py[line:179]: Input data_sets: {'intersect_0': {'data': [<fate_arch.computing.eggroll._table.Table object at 0x7fb3263f47f0>]}}
[DEBUG] [2020-11-20 02:34:52,651] [1392:140407779477312] - component_properties.py[line:189]: data_dict: {'data': [<fate_arch.computing.eggroll._table.Table object at 0x7fb3263f47f0>]}
[DEBUG] [2020-11-20 02:34:52,652] [1392:140407779477312] - component_properties.py[line:192]: data_list: <fate_arch.computing.eggroll._table.Table object at 0x7fb3263f47f0>
[DEBUG] [2020-11-20 02:34:53,510] [1392:140407779477312] - component_properties.py[line:231]: train_data: None, validate_data: None, test_data: None, data: {'intersect_0.data': <fate_arch.computing.eggroll._table.Table object at 0x7fb3263f47f0>}
[DEBUG] [2020-11-20 02:34:53,511] [1392:140407779477312] - model_base.py[line:88]: running_funcs: [<function ModelBase.extract_data at 0x7fb326310b70>, <bound method ModelBase.set_flowid of <federatedml.feature.hetero_feature_binning.hetero_binning_host.HeteroFeatureBinningHost object at 0x7fb3290f5278>>, <bound method HeteroFeatureBinningHost.fit of <federatedml.feature.hetero_feature_binning.hetero_binning_host.HeteroFeatureBinningHost object at 0x7fb3290f5278>>]
[DEBUG] [2020-11-20 02:34:53,511] [1392:140407779477312] - model_base.py[line:340]: In extract_data, data input: {'intersect_0.data': <fate_arch.computing.eggroll._table.Table object at 0x7fb3263f47f0>}
[DEBUG] [2020-11-20 02:34:53,512] [1392:140407779477312] - model_base.py[line:162]: set flowid to transfer_variable, flowid: fit
[DEBUG] [2020-11-20 02:34:53,512] [1392:140407779477312] - model_base.py[line:97]: func: <bound method HeteroFeatureBinningHost.fit of <federatedml.feature.hetero_feature_binning.hetero_binning_host.HeteroFeatureBinningHost object at 0x7fb3290f5278>>
[DEBUG] [2020-11-20 02:34:54,001] [1392:140407779477312] - abnormal_detection.py[line:81]: schema is {'header': ['x0', 'x1', 'x2', 'x3', 'x4', 'x5', 'x6', 'x7', 'x8', 'x9', 'x10', 'x11', 'x12', 'x13', 'x14', 'x15', 'x16', 'x17', 'x18', 'x19'], 'sid_name': 'id', 'label_name': 'y'}
[DEBUG] [2020-11-20 02:34:54,003] [1392:140407779477312] - abnormal_detection.py[line:85]: header is ['x0', 'x1', 'x2', 'x3', 'x4', 'x5', 'x6', 'x7', 'x8', 'x9', 'x10', 'x11', 'x12', 'x13', 'x14', 'x15', 'x16', 'x17', 'x18', 'x19']
[DEBUG] [2020-11-20 02:34:54,004] [1392:140407779477312] - abnormal_detection.py[line:95]: sid_name is id
[DEBUG] [2020-11-20 02:34:54,005] [1392:140407779477312] - abnormal_detection.py[line:100]: label_name is y
[DEBUG] [2020-11-20 02:34:54,006] [1392:140407779477312] - base_feature_binning.py[line:85]: _setup_bin_inner_param, get header: ['x0', 'x1', 'x2', 'x3', 'x4', 'x5', 'x6', 'x7', 'x8', 'x9', 'x10', 'x11', 'x12', 'x13', 'x14', 'x15', 'x16', 'x17', 'x18', 'x19']
[DEBUG] [2020-11-20 02:34:54,007] [1392:140407779477312] - base_feature_binning.py[line:105]: After _setup_bin_inner_param, header: ['x0', 'x1', 'x2', 'x3', 'x4', 'x5', 'x6', 'x7', 'x8', 'x9', 'x10', 'x11', 'x12', 'x13', 'x14', 'x15', 'x16', 'x17', 'x18', 'x19']
[DEBUG] [2020-11-20 02:35:11,194] [1392:140407779477312] - quantile_binning.py[line:108]: new summary_dict: {'x0': <federatedml.feature.binning.quantile_summaries.QuantileSummaries object at 0x7fb3262c5dd8>, 'x8': <federatedml.feature.binning.quantile_summaries.QuantileSummaries object at 0x7fb326271e48>, 'x15': <federatedml.feature.binning.quantile_summaries.QuantileSummaries object at 0x7fb326277048>, 'x7': <federatedml.feature.binning.quantile_summaries.QuantileSummaries object at 0x7fb3262edd68>, 'x14': <federatedml.feature.binning.quantile_summaries.QuantileSummaries object at 0x7fb3262edeb8>, 'x6': <federatedml.feature.binning.quantile_summaries.QuantileSummaries object at 0x7fb3262a4c50>, 'x13': <federatedml.feature.binning.quantile_summaries.QuantileSummaries object at 0x7fb3262a4da0>, 'x5': <federatedml.feature.binning.quantile_summaries.QuantileSummaries object at 0x7fb32621ccc0>, 'x12': <federatedml.feature.binning.quantile_summaries.QuantileSummaries object at 0x7fb32621cd68>, 'x4': <federatedml.feature.binning.quantile_summaries.QuantileSummaries object at 0x7fb32621cb38>, 'x11': <federatedml.feature.binning.quantile_summaries.QuantileSummaries object at 0x7fb32621cc88>, 'x19': <federatedml.feature.binning.quantile_summaries.QuantileSummaries object at 0x7fb3261ef940>, 'x3': <federatedml.feature.binning.quantile_summaries.QuantileSummaries object at 0x7fb3262681d0>, 'x10': <federatedml.feature.binning.quantile_summaries.QuantileSummaries object at 0x7fb326268278>, 'x18': <federatedml.feature.binning.quantile_summaries.QuantileSummaries object at 0x7fb3261abac8>, 'x2': <federatedml.feature.binning.quantile_summaries.QuantileSummaries object at 0x7fb326268550>, 'x17': <federatedml.feature.binning.quantile_summaries.QuantileSummaries object at 0x7fb3262a4cc0>, 'x1': <federatedml.feature.binning.quantile_summaries.QuantileSummaries object at 0x7fb3262685c0>, 'x9': <federatedml.feature.binning.quantile_summaries.QuantileSummaries object at 0x7fb3261196a0>, 'x16': <federatedml.feature.binning.quantile_summaries.QuantileSummaries object at 0x7fb326135550>}
[DEBUG] [2020-11-20 02:35:14,018] [1392:140407779477312] - hetero_binning_host.py[line:61]: data_bin_table, count: 569
[DEBUG] [2020-11-20 02:35:14,473] [1392:140407779477312] - _federation.py[line:176]: [federation.eggroll.get.hash.86537db0b6836d5c997d.encrypted_label.fit] got RollPair(namespace=202011200231350021282_hetero_feature_binning_0_0, name=__rsk#202011200231350021282_hetero_feature_binning_0_0#hash.86537db0b6836d5c997d.encrypted_label#fit#guest#10000#host#9999, partitions=8)
[INFO] [2020-11-20 02:35:14,475] [1392:140407779477312] - hetero_binning_host.py[line:66]: Get encrypted_label_table from guest
[DEBUG] [2020-11-20 02:35:26,977] [1392:140407779477312] - hetero_binning_host.py[line:76]: encrypted_bin_sum: dict_keys(['host_9999_0', 'host_9999_1', 'host_9999_2', 'host_9999_3', 'host_9999_4', 'host_9999_5', 'host_9999_6', 'host_9999_7', 'host_9999_8', 'host_9999_9', 'host_9999_10', 'host_9999_11', 'host_9999_12', 'host_9999_13', 'host_9999_14', 'host_9999_15', 'host_9999_16', 'host_9999_17', 'host_9999_18', 'host_9999_19']), cols_map: {'x0': 0, 'x1': 1, 'x2': 2, 'x3': 3, 'x4': 4, 'x5': 5, 'x6': 6, 'x7': 7, 'x8': 8, 'x9': 9, 'x10': 10, 'x11': 11, 'x12': 12, 'x13': 13, 'x14': 14, 'x15': 15, 'x16': 16, 'x17': 17, 'x18': 18, 'x19': 19}
[DEBUG] [2020-11-20 02:35:26,979] [1392:140407779477312] - hetero_binning_host.py[line:91]: Send bin_info.category_names: [], bin_info.bin_method: quantile
[DEBUG] [2020-11-20 02:35:26,982] [1392:140407779477312] - _federation.py[line:86]: [federation.eggroll.remote.hash.8489931ea2e9e6cb4470.encrypted_bin_sum.fit[('guest', '10000')])]remote object with type: <class 'dict'>
[DEBUG] [2020-11-20 02:35:27,705] [1392:140407134557952] - _federation.py[line:133]: [federation.eggroll.remote.hash.8489931ea2e9e6cb4470.encrypted_bin_sum.fit]future to remote to party: ('guest', '10000') done
[DEBUG] [2020-11-20 02:35:28,399] [1392:140407779477312] - base_feature_binning.py[line:203]: After Binning, when setting schema, schema is : {'header': ['x0', 'x1', 'x2', 'x3', 'x4', 'x5', 'x6', 'x7', 'x8', 'x9', 'x10', 'x11', 'x12', 'x13', 'x14', 'x15', 'x16', 'x17', 'x18', 'x19'], 'sid_name': 'id', 'label_name': 'y'}
[DEBUG] [2020-11-20 02:35:28,528] [1392:140407779477312] - schema_check.py[line:22]: input schema: {'header': ['x0', 'x1', 'x2', 'x3', 'x4', 'x5', 'x6', 'x7', 'x8', 'x9', 'x10', 'x11', 'x12', 'x13', 'x14', 'x15', 'x16', 'x17', 'x18', 'x19'], 'sid_name': 'id', 'label_name': 'y'} -> output schema: {'header': ['x0', 'x1', 'x2', 'x3', 'x4', 'x5', 'x6', 'x7', 'x8', 'x9', 'x10', 'x11', 'x12', 'x13', 'x14', 'x15', 'x16', 'x17', 'x18', 'x19'], 'sid_name': 'id', 'label_name': 'y'}
[DEBUG] [2020-11-20 02:35:28,746] [1392:140407779477312] - io_check.py[line:35]: num row of input: 569 -> num row of output: 569
[DEBUG] [2020-11-20 02:35:28,747] [1392:140407779477312] - base_feature_binning.py[line:203]: After Binning, when setting schema, schema is : {'header': ['x0', 'x1', 'x2', 'x3', 'x4', 'x5', 'x6', 'x7', 'x8', 'x9', 'x10', 'x11', 'x12', 'x13', 'x14', 'x15', 'x16', 'x17', 'x18', 'x19'], 'sid_name': 'id', 'label_name': 'y'}
[DEBUG] [2020-11-20 02:35:28,748] [1392:140407779477312] - model_base.py[line:109]: saved_result is : [<fate_arch.computing.eggroll._table.Table object at 0x7fb31a38be80>], data_output: <fate_arch.computing.eggroll._table.Table object at 0x7fb31a38be80>
[INFO] [2020-11-20 02:35:28,750] [1392:140407779477312] - tracker_client.py[line:173]: Request save job 202011200231350021282 task 202011200231350021282_hetero_feature_binning_0 0 on host 9999 component summary
[DEBUG] [2020-11-20 02:35:33,273] [1392:140407779477312] - bin_result.py[line:174]: In generated_pb, role: host, party_id: 9999
[INFO] [2020-11-20 02:35:33,317] [1392:140407779477312] - control_client.py[line:42]: request update job 202011200231350021282 task 202011200231350021282_hetero_feature_binning_0 0 on host 9999
[INFO] [2020-11-20 02:35:34,627] [1392:140407779477312] - control_client.py[line:42]: request update job 202011200231350021282 task 202011200231350021282_hetero_feature_binning_0 0 on host 9999
